<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8" />
	<title>Events Calendar</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
    
    <!--
    <script src="https://code.jquery.com/jquery-git.js"></script>	
    -->

</head>

<body>

	<div class="container">

		<div class="item place card">
			<img src="https://www.american.edu/images/csthumbnail_large/McKinley-Building2.png" alt="Sample image" class="img"> 
			<p>
				<b class="eventTitle"></b>
				<em class="date"></em> 
				<em class="time"></em> 
				<b class="location"></b>
			</p>
			<p class="description"></p>
		</div>

		<div class="item place card">
			<img src="https://www.american.edu/images/csthumbnail_large/McKinley-Building2.png" alt="Sample image" class="img"> 
			<p>
				<b class="eventTitle"></b>
				<em class="date"></em> 
				<em class="time"></em> 
				<b class="location"></b>
			</p>
			<p class="description"></p>
		</div>

		<div class="item place card">
			<img src="https://www.american.edu/images/csthumbnail_large/McKinley-Building2.png" alt="Sample image" class="img"> 
			<p>
				<b class="eventTitle"></b>
				<em class="date"></em> 
				<em class="time"></em> 
				<b class="location"></b>
			</p>
			<p class="description"> </p>
		</div>
 
		<div class="item place card">
			<img src="https://www.american.edu/images/csthumbnail_large/McKinley-Building2.png" alt="Sample image" class="img"> 
			<p>
				<b class="eventTitle"></b>
				<em class="date"></em> 
				<em class="time"></em> 
				<b class="location"></b>
			</p>
			<p class="description"> </p>
		</div>

		<div class="item place card">
			<img src="https://www.american.edu/images/csthumbnail_large/McKinley-Building2.png" alt="Sample image" class="img"> 
			<p>
				<b class="eventTitle"></b>
				<em class="date"></em> 
				<em class="time"></em> 
				<b class="location"></b>
			</p>
			<p class="description"> </p>
		</div>

		<div class="item place card">
			<img src="https://www.american.edu/images/csthumbnail_large/McKinley-Building2.png" alt="Sample image" class="img"> 
			<p>
				<b class="eventTitle"></b>
				<em class="date"></em> 
				<em class="time"></em> 
				<b class="location"></b>
			</p>
			<p class="description"> </p>
		</div>

		<div class="item place card">
			<img src="https://www.american.edu/images/csthumbnail_large/McKinley-Building2.png" alt="Sample image" class="img"> 
			<p>
				<b class="eventTitle"></b>
				<em class="date"></em> 
				<em class="time"></em> 
				<b class="location"></b>
			</p>
			<p class="description"></p>
		</div>

		<div class="buttons">
			<button onclick="pageDown()"><img class="arrow" id="down" src="img/down.png" alt="down arrow"></button>
			<button onclick="pageUp()"><img class="arrow" id="up" src="img/up.png" alt="up arrow"></button>
		</div>

	</div>

<script>

	var position;
	var cards;
	var rotateTimer; 
	var holdTimer;
	var places;
	var image;
	var desc;
	
	var looped; //have you gone back around? used to manage automatic paging

	var dumbTest = "hur durr";
	
	function Highlight() {
		for (var i = 0; i < cards.length; i++) {
			if (i == position) {
                console.log("Highlighted " + i);
				$(cards[i]).addClass("highlighted");
				$(cards[i]).removeClass("normal");
			} else {
				$(cards[i]).addClass("normal");
				$(cards[i]).removeClass("highlighted");
			}	
		}
	}

	function incrementPosition() {
		direction = "forward"
		var increment = 1
		if (direction == "backward") { increment = -1}
	
		position = (position + increment) % cards.length
		//if you reach the end of the list of items then page forward
		if(!looped && position == 1){
			looped = true;
		}else if (looped && position == 1){
			looped = false;
			pageUp();
		}
	}

	function doCycle() {	
        console.log("doCycle started");
		Highlight()
		incrementPosition()
	}

	function Cycle() {
        console.log("started cycle");
		rotateTimer=setInterval(doCycle, 2000);
	}
    


	function Setup() {
		looped = false; //we haven't gone through all the cards displayed

		position=0;
		cards = document.getElementsByClassName("card");
		places = document.getElementsByClassName("place");
		image = document.getElementsByClassName("img");
		desc = document.getElementsByClassName("description");
        
		for (var i = 0; i < cards.length; i++) {
			cards[i].addEventListener("click", Hold);
			$(cards[i]).data("val", i); //each card gets a value so we can reset the highlight
		}
	}

	function Hold(x) {
        console.log("Hold start clicked " + x);
		clearInterval(rotateTimer);
        clearInterval(holdTimer);
		let testHold = $(this).data("val") % cards.length;
		position = testHold;
		Highlight();	
		holdTimer = setInterval(HoldClock, 6000);
	}

	function HoldClock() {
        console.log("holdclock started");
		Cycle();
		clearInterval(holdTimer);
	}

	window.onload = function(){
		Setup();
		Cycle();
	}

</script>	
    <script src="parse.js"></script>
</body>

</html>